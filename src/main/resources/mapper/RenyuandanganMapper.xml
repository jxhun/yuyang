<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.yuyang.pojo.RenyuandanganMapper">
    <select id="selectQuanXian" resultMap="getOneToOneMao">
        select r.id as id1,
               z.id as id2,
               z.faBuXiuGaiGongGao,
               z.quanXianGuanLi,
               z.caoZuoYuanGong,
               z.chaKanKaoQin,
               z.daiBanShiXiang,
               z.qinJiaShenPi,
               z.chaKanYuanGong
        from zhiwubiao as z
                 join renyuandangan as r
        where r.zhiWuId = z.id
          and r.id = #{id}
    </select>

    <resultMap id="getOneToOneMao" type="cn.com.yuyang.pojo.Renyuandangan">
        <id property="id" column="id1"/>
        <association property="zhiwubiao" javaType="cn.com.yuyang.pojo.Zhiwubiao">
            <id property="id" column="id2"/>
            <result property="faBuXiuGaiGongGao" column="faBuXiuGaiGongGao"/>
            <result property="buMenCaoZuo" column="buMenCaoZuo"/>
            <result property="caoZuoYuanGong" column="caoZuoYuanGong"/>
            <result property="chaKanKaoQin" column="chaKanKaoQin"/>
            <result property="daiBanShiXiang" column="daiBanShiXiang"/>
            <result property="qinJiaShenPi" column="qinJiaShenPi"/>
            <result property="chaKanYuanGong" column="chaKanYuanGong"/>
        </association>
    </resultMap>


    <select id="selectGeRenChaXun" resultType="cn.com.yuyang.pojo.Renyuandangan"
            parameterType="cn.com.yuyang.bean.Bumenbean">
        select r.id,
               r.xingMing,
               r.ruZhiShiJian,
               r.heTongDaoQiShiJian,
               r.xingBie,
               r.shengRi,
               r.jinJiLianXiDianHua,
               r.xianZhuZhi,
               r.xueLi,
               r.youXiang,
               r.biYeYuanXiao,
               r.zaiZhiZhuangTai,
               r.minZu,
               r.jiGuan,
               r.shenFenZheng,
               r.zhengZhiMianMao,
               r.hunYin,
               r.nianLing,
               r.beiZhu,
               r.zhiWuId,
               r.buMenId,
               r.touXiang
        from renyuandangan as r
        where r.xingMing = #{xingMing}
    </select>

    <select id="selectCount"  resultType="cn.com.yuyang.bean.Bumenbean"
            parameterType="cn.com.yuyang.pojo.Bumen">
        select
        count(r.id),
        b.id,
        b.dangAnId,
        b.buMenMingCheng,
        b.buMenJianJie,
        b.chuangJianShiJian
        from renyuandangan as r join bumen as b where r.buMenId = b.id
        <if test="buMenMingCheng!=null and buMenMingCheng!=''">
            and b.buMenMingCheng like #{buMenMingCheng}
        </if>
        group by buMenId
    </select>
</mapper>